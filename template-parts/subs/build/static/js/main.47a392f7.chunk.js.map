{"version":3,"sources":["components/NavBar.js","components/AdminHeader.js","components/SubscriberTable.js","utils/returnURL.js","components/AddSub.js","components/SubModal.js","components/PatronModal.js","components/AdminPanel.js","App.js","index.js"],"names":["NavBar","AdminHeader","props","most_recent","activeSubs","length","id","activePatrons","first_name","last_name","expiringSubs","expiringPatrons","GlobalFilter","preGlobalFilteredRows","globalFilter","setGlobalFilter","count","value","onChange","e","target","undefined","placeholder","style","fontSize","border","SubscriberTable","columns","data","useTable","initialState","sortBy","desc","pageSize","useFilters","useGlobalFilter","useSortBy","usePagination","getTableProps","getTableBodyProps","headerGroups","prepareRow","state","flatColumns","page","canPreviousPage","canNextPage","pageOptions","pageCount","gotoPage","nextPage","previousPage","setPageSize","pageIndex","colSpan","textAlign","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","filter","row","i","getRowProps","cells","cell","getCellProps","className","onClick","disabled","type","defaultValue","Number","width","key","return_url","base","endpoint","process","LIVE_TEST","window","location","hostname","formData","form","v","el","querySelector","obj","email","address_line1","address_line2","address_city","address_country","address_postcode","issue","final_issue","delivery","JSON","stringify","AddSubForm","handleSubmit","event","preventDefault","document","getElementById","fetch","method","body","Accept","then","res","json","message","setTimeout","reset","alert","console","log","onSubmit","this","htmlFor","required","pattern","name","defaultChecked","min","React","Component","EditModal","useState","sub_id","sub","address_one","address_two","city","country","postcode","subscribe_until","start_issue","formState","setFormState","handleChange","s","onInput","updateSub","text","t","openState","open","SubModal","date_start","next_renewal_date","gift","gifter_email","gifter_first_name","gifter_last_name","stripe_subscription_id","wp_user_id","fa","address_line","trim","format","Date","parseInt","rel","href","base_url","affectedRows","cancelSubscription","OutputModal","setSub","view","setView","newSubData","ns","Object","keys","forEach","k","patron_id","amount","anonymous","AdminPanel","subscriber","setSubscriber","showSubDialog","setShowSubDialog","closeSubModal","patron","setPatron","showPatronDialog","setShowPatronDialog","closePatronModal","seeMoreSub","useCallback","dataset","subscribers","seeMorePatron","patrons","SelectColumnFilter","filterValue","setFilter","preFilteredRows","options","useMemo","Set","add","values","sort","stopPropagation","option","subColumns","Header","accessor","Cell","Filter","slice","indexOf","data-sub_id","patronColumns","data-patron_id","subs","today","month_from_now","months","is_expiring","arr","isBefore","parseISO","isAfter","expires","p","years","is_active","sub_status","CoolTab","isSelected","children","textDecoration","aria-label","isOpen","onDismiss","aria-hidden","PatronModal","AddSub","fetcher","url","a","async","axios","get","response","error","App","useSWR","refreshInterval","sub_error","patron_error","ReactDOM"],"mappings":"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","file":"static/js/main.47a392f7.chunk.js","sourcesContent":["// src/components/NavBar.js\n\nimport React from \"react\";\n\nconst NavBar = () => {\n  return (\n    <nav>\n      <h1>Stinging Fly Subscriber Admin</h1>\n    </nav>\n  );\n};\n\nexport default NavBar;\n","import React from \"react\";\n\nconst AdminHeader = (props) => {\n  // Find most recent subscriber.\n  let most_recent = props.activeSubs[props.activeSubs.length - 1];\n  return (\n    <section id=\"admin_panel_header\">\n      <p>\n        There are {props.activeSubs.length} current subscribers and{\" \"}\n        {props.activePatrons.length} current patrons.{\" \"}\n      </p>\n      <p>\n        The latest subscriber is {most_recent.first_name}{\" \"}\n        {most_recent.last_name}.{\" \"}\n      </p>\n      <p>\n        There are {props.expiringSubs.length} subscriptions and{\" \"}\n        {props.expiringPatrons.length} patrons expiring in the next 30 days.\n      </p>\n    </section>\n  );\n};\n\nexport default AdminHeader;\n","import React from \"react\";\nimport {\n  useTable,\n  useFilters,\n  useGlobalFilter,\n  useSortBy,\n  usePagination\n} from \"react-table\";\n\n// Define a default UI for filtering\nfunction GlobalFilter({\n  preGlobalFilteredRows,\n  globalFilter,\n  setGlobalFilter\n}) {\n  const count = preGlobalFilteredRows.length;\n\n  return (\n    <span>\n      Search:{\" \"}\n      <input\n        value={globalFilter || \"\"}\n        onChange={e => {\n          setGlobalFilter(e.target.value || undefined); // Set undefined to remove the filter entirely\n        }}\n        placeholder={`${count} records...`}\n        style={{\n          fontSize: \"14px\",\n          border: \"0\"\n        }}\n      />\n    </span>\n  );\n}\n\n// Table Component\nfunction SubscriberTable({ columns, data }) {\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    prepareRow,\n    state,\n    flatColumns,\n    preGlobalFilteredRows,\n    setGlobalFilter,\n    page, // Instead of using 'rows', we'll use page,\n    // which has only the rows for the active page\n\n    // The rest of these things are super handy, too ;)\n    canPreviousPage,\n    canNextPage,\n    pageOptions,\n    pageCount,\n    gotoPage,\n    nextPage,\n    previousPage,\n    setPageSize,\n    state: { pageIndex, pageSize }\n  } = useTable(\n    {\n      columns,\n      data,\n      initialState: {\n        sortBy: [{ id: \"date_start\", desc: true }],\n        pageSize: 10\n      }\n    },\n    useFilters,\n    useGlobalFilter,\n    useSortBy,\n    usePagination\n  );\n\n  return (\n    <>\n      <table {...getTableProps()}>\n        <thead>\n          <tr>\n            <th\n              colSpan={flatColumns.length}\n              style={{\n                textAlign: \"left\"\n              }}\n            >\n              <GlobalFilter\n                preGlobalFilteredRows={preGlobalFilteredRows}\n                globalFilter={state.globalFilter}\n                setGlobalFilter={setGlobalFilter}\n              />\n            </th>\n          </tr>\n          {headerGroups.map(headerGroup => (\n            <tr {...headerGroup.getHeaderGroupProps()}>\n              {headerGroup.headers.map(column => (\n                <th {...column.getHeaderProps(column.getSortByToggleProps())}>\n                  {column.render(\"Header\")}\n                  <span>\n                    {column.isSorted ? (column.isSortedDesc ? \" ▼\" : \" ▲\") : \"\"}\n                  </span>\n                  {column.filter === \"includes\"\n                    ? column.render(\"Filter\")\n                    : null}\n                </th>\n              ))}\n            </tr>\n          ))}\n        </thead>\n        <tbody {...getTableBodyProps()}>\n          {page.map((row, i) => {\n            prepareRow(row);\n            return (\n              <tr {...row.getRowProps()}>\n                {row.cells.map(cell => {\n                  return (\n                    <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n      <div className=\"pagination\">\n        <button onClick={() => gotoPage(0)} disabled={!canPreviousPage}>\n          {\"<<\"}\n        </button>{\" \"}\n        <button onClick={() => previousPage()} disabled={!canPreviousPage}>\n          {\"<\"}\n        </button>{\" \"}\n        <button onClick={() => nextPage()} disabled={!canNextPage}>\n          {\">\"}\n        </button>{\" \"}\n        <button onClick={() => gotoPage(pageCount - 1)} disabled={!canNextPage}>\n          {\">>\"}\n        </button>{\" \"}\n        <span>\n          Page{\" \"}\n          <strong>\n            {pageIndex + 1} of {pageOptions.length}\n          </strong>{\" \"}\n        </span>\n        <span>\n          | Go to page:{\" \"}\n          <input\n            type=\"number\"\n            defaultValue={pageIndex + 1}\n            onChange={e => {\n              const page = e.target.value ? Number(e.target.value) - 1 : 0;\n              gotoPage(page);\n            }}\n            style={{ width: \"100px\" }}\n          />\n        </span>{\" \"}\n        <select\n          value={pageSize}\n          onChange={e => {\n            setPageSize(Number(e.target.value));\n          }}\n        >\n          {[10, 20, 30, 40, 50].map(pageSize => (\n            <option key={pageSize} value={pageSize}>\n              Show {pageSize}\n            </option>\n          ))}\n        </select>\n      </div>\n    </>\n  );\n}\n\nexport default SubscriberTable;\n","const return_url = (endpoint = \"subscribers\") => {\n  var base;\n  if (\n    process.env.LIVE_TEST === \"true\" ||\n    window.location.hostname === \"stingingfly.org\"\n  ) {\n    base = `https://enigmatic-basin-09064.herokuapp.com/api`;\n  } else {\n    base = `http://localhost:8001/api`;\n  }\n  return `${base}/${endpoint}`;\n};\n\nexport default return_url;\n","import React from \"react\";\nimport return_url from \"../utils/returnURL\";\n\nconst formData = form => {\n  let v = el => form.querySelector(el).value || null;\n  let obj = {\n    first_name: v(\"#first_name\"),\n    last_name: v(\"#last_name\"),\n    email: v(\"#email\"),\n    address_line1: v(\"#address_line1\"),\n    address_line2: v(\"#address_line2\"),\n    address_city: v(\"#address_city\"),\n    address_country: v(\"#address_country\"),\n    address_postcode: v(\"#address_postcode\"),\n    issue: v(\"#start_issue\"),\n    final_issue: v(\"#final_issue\"),\n    delivery: v('input[name=\"delivery\"]:checked')\n  };\n  return JSON.stringify(obj);\n};\n\nclass AddSubForm extends React.Component {\n  handleSubmit = event => {\n    event.preventDefault();\n    const form = document.getElementById(\"add-sub-form\");\n    fetch(return_url(), {\n      method: \"POST\",\n      body: formData(form),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => res.json())\n      .then(res => {\n        switch (res.message) {\n          case \"subscriber_added\":\n            setTimeout(() => {\n              form.reset();\n              alert(\"Subscriber Added\");\n            }, 250);\n            break;\n          case \"subscriber_updated\":\n            setTimeout(() => {\n              form.reset();\n              alert(\"Subscriber Updated\");\n            }, 250);\n            break;\n          case \"Existing Customer\":\n            setTimeout(() => {\n              alert(\"Subscriber already exists\");\n            }, 250);\n            break;\n          default:\n            console.log(res);\n            setTimeout(() => {\n              alert(\"Failed to Add Subscriber – Try Again?\");\n            }, 250);\n            break;\n        }\n      });\n  };\n\n  render() {\n    return (\n      <form id=\"add-sub-form\" onSubmit={this.handleSubmit}>\n        <fieldset id=\"sub_contact\">\n          <legend>Name + Email</legend>\n          <div className=\"fieldset-inputs\">\n            <label htmlFor=\"first_name\" className=\"half-width\">\n              <span className=\"label-title\">First Name</span>\n              <input\n                id=\"first_name\"\n                type=\"text\"\n                required\n                placeholder=\" \"\n                pattern=\".*\\S.*\"\n                name=\"first_name\"\n              />\n              <span className=\"validation\">This field is required.</span>\n            </label>\n            <label htmlFor=\"last_name\" className=\"half-width\">\n              <span className=\"label-title\">Last Name</span>\n              <input\n                id=\"last_name\"\n                type=\"text\"\n                required\n                placeholder=\" \"\n                pattern=\".*\\S.*\"\n                name=\"last_name\"\n              />\n              <span className=\"validation\">This field is required.</span>\n            </label>\n            <label htmlFor=\"email\" className=\"full-width\">\n              <span className=\"label-title\">Email</span>\n              <input\n                id=\"email\"\n                type=\"email\"\n                required\n                placeholder=\" \"\n                pattern=\".*\\S.*\"\n                name=\"email\"\n              />\n              <span className=\"validation\">This field is invalid.</span>\n            </label>\n          </div>\n        </fieldset>\n        <fieldset>\n          <legend>Address</legend>\n          <div className=\"fieldset-inputs\">\n            <label htmlFor=\"address_line1\" className=\"full-width\">\n              Address Line 1\n              <input\n                id=\"address_line1\"\n                name=\"address_line1\"\n                type=\"text\"\n                required\n                placeholder=\"&nbsp;\"\n                pattern=\".*\\S.*\"\n              />\n              <span className=\"validation\">This field is required.</span>\n            </label>\n            <label htmlFor=\"address_line2\" className=\"full-width\">\n              Address Line 2\n              <input\n                id=\"address_line2\"\n                name=\"address_line2\"\n                type=\"text\"\n                required\n                placeholder=\"&nbsp;\"\n                pattern=\".*\\S.*\"\n              />\n              <span className=\"validation\">This field is required.</span>\n            </label>\n            <label htmlFor=\"address_city\" className=\"third-width\">\n              City\n              <input id=\"address_city\" name=\"address_city\" type=\"text\" />\n            </label>\n            <label htmlFor=\"address_country\" className=\"third-width\">\n              Country\n              <input id=\"address_country\" name=\"address_country\" type=\"text\" />\n            </label>\n            <label htmlFor=\"address_postcode\" className=\"third-width\">\n              Postcode\n              <input\n                id=\"address_postcode\"\n                name=\"address_postcode\"\n                type=\"text\"\n              />\n            </label>\n          </div>\n          <h3>Select your delivery region</h3>\n          <input\n            type=\"radio\"\n            name=\"delivery\"\n            id=\"irl\"\n            value=\"irl\"\n            defaultChecked\n          />\n          <label htmlFor=\"irl\">Ireland and Northern Ireland</label>\n          <input type=\"radio\" name=\"delivery\" id=\"row\" value=\"row\" />\n          <label htmlFor=\"row\">Rest of the World</label>\n        </fieldset>\n        <fieldset id=\"sub_start\">\n          <legend>Issue</legend>\n          <label htmlFor=\"start_issue\">\n            Starting Issue\n            <input\n              type=\"number\"\n              id=\"start_issue\"\n              name=\"start_issue\"\n              min=\"41\"\n            ></input>\n          </label>\n          <label htmlFor=\"final_issue\">\n            Final Issue (Optional – Defaults to One Year)\n            <input\n              type=\"number\"\n              id=\"final_issue\"\n              name=\"final_issue\"\n              min=\"42\"\n            ></input>\n          </label>\n        </fieldset>\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    );\n  }\n}\n\nexport default AddSubForm;\n","import React from \"react\";\nimport { format } from \"date-fns\";\nimport return_url from \"../utils/returnURL\";\n\nconst cancelSubscription = sub_id => {\n  let base_url = return_url();\n  fetch(`${base_url}?sub_id=${sub_id}`, {\n    method: \"delete\"\n  })\n    .then(res => res.json())\n    .then(t => {\n      console.log(t);\n      if (t.affectedRows === 1) {\n        alert(\"Subscription Cancelled\");\n      }\n      return t;\n    });\n};\n\nconst EditModal = props => {\n  let [formState, setFormState] = React.useState({\n    sub_id: props.sub[0].sub_id,\n    first_name: props.sub[0].first_name,\n    last_name: props.sub[0].last_name,\n    email: props.sub[0].email,\n    address_one: props.sub[0].address_one,\n    address_two: props.sub[0].address_two,\n    city: props.sub[0].city,\n    country: props.sub[0].country,\n    postcode: props.sub[0].postcode,\n    subscribe_until: props.sub[0].subscribe_until,\n    start_issue: props.sub[0].start_issue\n  });\n\n  let save = () => {\n    console.log(formState);\n    props.updateSub(formState);\n    fetch(return_url(), {\n      method: \"PUT\",\n      body: JSON.stringify(formState),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => res.text())\n      .then(t => {\n        console.log(t);\n        props.openState({ open: \"sub\" });\n      });\n  };\n\n  let handleChange = e => {\n    let s = { ...formState };\n    s[e.target.name] = e.target.value;\n    setFormState(s);\n  };\n\n  return (\n    <div className=\"edit-modal\">\n      <form id=\"edit-form\">\n        <label htmlFor=\"first_name\">First Name</label>\n        <input\n          name=\"first_name\"\n          id=\"first_name\"\n          defaultValue={formState.first_name}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n        <label htmlFor=\"last_name\">Last Name</label>\n        <input\n          name=\"last_name\"\n          id=\"last_name\"\n          defaultValue={formState.last_name}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n        <label htmlFor=\"email\">Email</label>\n        <input\n          name=\"email\"\n          id=\"email\"\n          defaultValue={formState.email}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"address_one\">Address Line 1</label>\n        <input\n          name=\"address_one\"\n          id=\"address_one\"\n          defaultValue={formState.address_one}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"address_two\">Address Line 2</label>\n        <input\n          name=\"address_two\"\n          id=\"address_two\"\n          defaultValue={formState.address_two}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"city\">City</label>\n        <input\n          name=\"city\"\n          id=\"city\"\n          defaultValue={formState.city}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"country\">Country</label>\n        <input\n          name=\"country\"\n          id=\"country\"\n          defaultValue={formState.country}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"postcode\">Postcode</label>\n        <input\n          name=\"postcode\"\n          id=\"postcode\"\n          defaultValue={formState.postcode}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"start_issue\">Starting Issue</label>\n        <input\n          type=\"number\"\n          name=\"start_issue\"\n          id=\"start_issue\"\n          defaultValue={formState.start_issue}\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"final_issue\">Final Issue</label>\n        <input\n          type=\"number\"\n          name=\"subscribe_until\"\n          id=\"final_issue\"\n          defaultValue={formState.subscribe_until}\n          onInput={handleChange}\n        />\n      </form>\n      <button id=\"save-edits\" onClick={save}>\n        Save Edits\n      </button>\n    </div>\n  );\n};\n\nconst SubModal = props => {\n  let {\n    sub_id,\n    first_name,\n    last_name,\n    email,\n    address_one,\n    address_two,\n    city,\n    country,\n    postcode,\n    date_start,\n    next_renewal_date,\n    gift,\n    gifter_email,\n    gifter_first_name,\n    gifter_last_name,\n    stripe_subscription_id,\n    subscribe_until,\n    start_issue,\n    wp_user_id\n  } = props.sub[0];\n\n  const fa = address_line => {\n    if (address_line) {\n      return \", \" + address_line.trim();\n    } else {\n      return \" \";\n    }\n  };\n\n  return (\n    <div className=\"sub_in_modal\">\n      <h2 className=\"modal__name\">\n        {first_name} {last_name} {gift ? <span>(Gift)</span> : \"\"}\n      </h2>\n      <p className=\"modal__email\">{email}</p>\n      <p className=\"modal__address\">\n        <strong>Address:</strong> <span>{address_one.trim()}</span>\n        <span>{fa(address_two)}</span>\n        <span>\n          {fa(city)}\n          {fa(postcode)}\n        </span>\n        <span>{fa(country)}</span>\n      </p>\n      <hr></hr>\n      <p>\n        <strong>Subscribed:</strong>{\" \"}\n        {format(new Date(date_start), \"dd/MM/yyyy\")}\n      </p>\n      <p>\n        <strong>Renews: </strong>\n        {gift\n          ? \"No Renewal\"\n          : format(new Date(next_renewal_date), \"dd/MM/yyyy\")}\n      </p>\n      <p>\n        <strong>Started With: </strong>\n        {parseInt(start_issue)}\n      </p>\n      <p>\n        <strong>Last Issue: </strong>\n        {parseInt(subscribe_until)}\n      </p>\n      <hr></hr>\n      <p>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={`https://dashboard.stripe.com/subscriptions/${stripe_subscription_id}`}\n        >\n          View on Stripe\n        </a>\n      </p>\n      <p>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={`https://stingingfly.org/wp-admin/user-edit.php?user_id=${wp_user_id}`}\n        >\n          View on stingingfly.org\n        </a>\n        {gift ? (\n          <section className=\"gift\">\n            <hr></hr>\n            <p>\n              <strong>Gifted By: </strong>\n              {gifter_first_name} {gifter_last_name} ({gifter_email})\n            </p>\n          </section>\n        ) : (\n          \"\"\n        )}\n      </p>\n      <hr></hr>\n      <button onClick={() => props.openState({ open: \"edit\" })}>\n        Edit Subscription Details\n      </button>\n      <button onClick={() => cancelSubscription(sub_id)}>\n        Cancel Subscription\n      </button>\n    </div>\n  );\n};\n\nconst OutputModal = props => {\n  const [sub, setSub] = React.useState(props);\n  const [view, setView] = React.useState({ open: \"sub\" });\n\n  const updateSub = newSubData => {\n    let ns = { ...sub };\n    let obj = ns.sub[0];\n    [...Object.keys(newSubData)].forEach(k => {\n      if (obj[k]) {\n        obj[k] = newSubData[k];\n      }\n    });\n    setSub(ns);\n  };\n\n  if (view.open === \"sub\") {\n    return <SubModal openState={v => setView(v)} {...sub} />;\n  }\n  if (view.open === \"edit\") {\n    return (\n      <EditModal\n        openState={v => setView(v)}\n        updateSub={s => updateSub(s)}\n        {...sub}\n      />\n    );\n  }\n};\n\nexport default OutputModal;\n","import React from \"react\";\nimport { format } from \"date-fns\";\nimport return_url from \"../utils/returnURL\";\n\nconst cancelSubscription = (patron_id) => {\n  let base_url = return_url(\"patrons\");\n  fetch(`${base_url}?patron_id=${patron_id}`, {\n    method: \"delete\",\n  })\n    .then((res) => res.json())\n    .then((t) => {\n      console.log(t);\n      if (t.affectedRows === 1) {\n        alert(\"Subscription Cancelled\");\n      }\n      return t;\n    });\n};\n\nconst EditModal = (props) => {\n  let [formState, setFormState] = React.useState({\n    patron_id: props.sub[0].patron_id,\n    first_name: props.sub[0].first_name,\n    last_name: props.sub[0].last_name,\n    email: props.sub[0].email,\n    address_one: props.sub[0].address_one,\n    address_two: props.sub[0].address_two,\n    city: props.sub[0].city,\n    country: props.sub[0].country,\n    postcode: props.sub[0].postcode,\n    subscribe_until: props.sub[0].subscribe_until,\n    start_issue: props.sub[0].start_issue,\n  });\n\n  let save = () => {\n    console.log(formState);\n    props.updateSub(formState);\n    fetch(return_url(\"patrons\"), {\n      method: \"PUT\",\n      body: JSON.stringify(formState),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.text())\n      .then((t) => {\n        console.log(t);\n        props.openState({ open: \"sub\" });\n      });\n  };\n\n  let handleChange = (e) => {\n    let s = { ...formState };\n    s[e.target.name] = e.target.value;\n    setFormState(s);\n  };\n\n  return (\n    <div className=\"edit-modal\">\n      <form id=\"edit-form\">\n        <label htmlFor=\"first_name\">First Name</label>\n        <input\n          name=\"first_name\"\n          id=\"first_name\"\n          defaultValue={formState.first_name}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n        <label htmlFor=\"last_name\">Last Name</label>\n        <input\n          name=\"last_name\"\n          id=\"last_name\"\n          defaultValue={formState.last_name}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n        <label htmlFor=\"email\">Email</label>\n        <input\n          name=\"email\"\n          id=\"email\"\n          defaultValue={formState.email}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"address_one\">Address Line 1</label>\n        <input\n          name=\"address_one\"\n          id=\"address_one\"\n          defaultValue={formState.address_one}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"address_two\">Address Line 2</label>\n        <input\n          name=\"address_two\"\n          id=\"address_two\"\n          defaultValue={formState.address_two}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"city\">City</label>\n        <input\n          name=\"city\"\n          id=\"city\"\n          defaultValue={formState.city}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"country\">Country</label>\n        <input\n          name=\"country\"\n          id=\"country\"\n          defaultValue={formState.country}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"postcode\">Postcode</label>\n        <input\n          name=\"postcode\"\n          id=\"postcode\"\n          defaultValue={formState.postcode}\n          pattern=\".*\\S.*\"\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"start_issue\">Starting Issue</label>\n        <input\n          type=\"number\"\n          name=\"start_issue\"\n          id=\"start_issue\"\n          defaultValue={formState.start_issue}\n          onInput={handleChange}\n        />\n\n        <label htmlFor=\"final_issue\">Final Issue</label>\n        <input\n          type=\"number\"\n          name=\"subscribe_until\"\n          id=\"final_issue\"\n          defaultValue={formState.subscribe_until}\n          onInput={handleChange}\n        />\n      </form>\n      <button id=\"save-edits\" onClick={save}>\n        Save Edits\n      </button>\n    </div>\n  );\n};\n\nconst SubModal = (props) => {\n  let {\n    patron_id,\n    first_name,\n    last_name,\n    email,\n    address_one,\n    address_two,\n    city,\n    country,\n    postcode,\n    date_start,\n    amount,\n    anonymous,\n    subscribe_until,\n    start_issue,\n    wp_user_id,\n  } = props.sub[0];\n\n  const fa = (address_line) => {\n    if (address_line) {\n      return \", \" + address_line.trim();\n    } else {\n      return \" \";\n    }\n  };\n\n  return (\n    <div className=\"sub_in_modal\">\n      <h2 className=\"modal__name\">\n        {first_name} {last_name}\n      </h2>\n      <p className=\"modal__email\">{email}</p>\n      <p className=\"modal__address\">\n        <strong>Address:</strong> <span>{address_one.trim()}</span>\n        <span>{fa(address_two)}</span>\n        <span>\n          {fa(city)}\n          {fa(postcode)}\n        </span>\n        <span>{fa(country)}</span>\n      </p>\n      <hr></hr>\n      <p>\n        <strong>Subscribed:</strong>{\" \"}\n        {format(new Date(date_start), \"dd/MM/yyyy\")}\n      </p>\n      <p>\n        <strong>Amount:</strong> €{parseInt(amount)}\n      </p>\n      <p>\n        <strong>Anonymous:</strong> {anonymous ? \"Yes\" : \"No\"}\n      </p>\n      <p>\n        <strong>Started With: </strong>\n        {parseInt(start_issue)}\n      </p>\n      <p>\n        <strong>Last Issue: </strong>\n        {parseInt(subscribe_until)}\n      </p>\n      <hr></hr>\n      <p>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={`https://stingingfly.org/wp-admin/user-edit.php?user_id=${wp_user_id}`}\n        >\n          View on stingingfly.org\n        </a>\n      </p>\n      <hr></hr>\n      <button onClick={() => props.openState({ open: \"edit\" })}>\n        Edit Subscription Details\n      </button>\n      <button onClick={() => cancelSubscription(patron_id)}>\n        Cancel Subscription\n      </button>\n    </div>\n  );\n};\n\nconst OutputModal = (props) => {\n  const [sub, setSub] = React.useState(props);\n  const [view, setView] = React.useState({ open: \"sub\" });\n\n  const updateSub = (newSubData) => {\n    let ns = { ...sub };\n    let obj = ns.sub[0];\n    [...Object.keys(newSubData)].forEach((k) => {\n      if (obj[k]) {\n        obj[k] = newSubData[k];\n      }\n    });\n    setSub(ns);\n  };\n\n  if (view.open === \"sub\") {\n    return <SubModal openState={(v) => setView(v)} {...sub} />;\n  }\n  if (view.open === \"edit\") {\n    return (\n      <EditModal\n        openState={(v) => setView(v)}\n        updateSub={(s) => updateSub(s)}\n        {...sub}\n      />\n    );\n  }\n};\n\nexport default OutputModal;\n","import React from \"react\";\nimport { Tabs, TabList, Tab, TabPanels, TabPanel } from \"@reach/tabs\";\nimport { Dialog } from \"@reach/dialog\";\nimport VisuallyHidden from \"@reach/visually-hidden\";\nimport \"@reach/dialog/styles.css\";\nimport \"@reach/tabs/styles.css\";\nimport AdminHeader from \"./AdminHeader\";\nimport SubscriberTable from \"./SubscriberTable\";\nimport AddSubForm from \"./AddSub\";\nimport SubModal from \"./SubModal\";\nimport PatronModal from \"./PatronModal\";\nimport { add, isBefore, parseISO, isAfter, format } from \"date-fns\";\n\nconst AdminPanel = (props) => {\n  const [subscriber, setSubscriber] = React.useState({});\n  const [showSubDialog, setShowSubDialog] = React.useState(false);\n  const openSubModal = () => setShowSubDialog(true);\n  const closeSubModal = () => setShowSubDialog(false);\n\n  const [patron, setPatron] = React.useState({});\n  const [showPatronDialog, setShowPatronDialog] = React.useState(false);\n  const openPatronModal = () => setShowPatronDialog(true);\n  const closePatronModal = () => setShowPatronDialog(false);\n\n  const seeMoreSub = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      let id = parseInt(e.target.dataset.sub_id);\n      let subscriber = props.data.subscribers.filter(\n        (sub) => sub.sub_id === id\n      );\n      setSubscriber(subscriber);\n      openSubModal();\n    },\n    [props.data.subscribers]\n  );\n\n  const seeMorePatron = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      let id = parseInt(e.target.dataset.patron_id);\n      let patron = props.data.patrons.filter((sub) => sub.patron_id === id);\n      setPatron(patron);\n      openPatronModal();\n    },\n    [props.data.patrons]\n  );\n\n  function SelectColumnFilter({\n    column: { filterValue, setFilter, preFilteredRows, id },\n  }) {\n    // Calculate the options for filtering\n    // using the preFilteredRows\n    const options = React.useMemo(() => {\n      const options = new Set();\n      preFilteredRows.forEach((row) => {\n        options.add(row.values[id]);\n      });\n      return [...options.values()].sort();\n    }, [id, preFilteredRows]);\n\n    // Render a multi-select box\n    return (\n      <select\n        value={filterValue}\n        onChange={(e) => {\n          setFilter(e.target.value || undefined);\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <option value=\"\">All</option>\n        {options.map((option, i) => (\n          <option key={i} value={option}>\n            {option}\n          </option>\n        ))}\n      </select>\n    );\n  }\n\n  // Define columns for the subscriber table.\n  const subColumns = React.useMemo(\n    () => [\n      {\n        Header: \"First Name\",\n        accessor: \"first_name\",\n      },\n      {\n        Header: \"Last Name\",\n        accessor: \"last_name\",\n      },\n      {\n        Header: \"Email\",\n        accessor: \"email\",\n      },\n      {\n        Header: \"Type\",\n        accessor: \"subscription_type\",\n        Cell: ({ cell: { value } }) => {\n          switch (value) {\n            case \"magonly\":\n              return \"Magazine\";\n            case \"bookonly\":\n              return \"Book\";\n            case \"magbook\":\n              return \"Mag + Book\";\n            default:\n              return \"Magazine\";\n          }\n        },\n        Filter: SelectColumnFilter,\n        filter: \"includes\",\n      },\n      {\n        Header: \"Subscribed\",\n        accessor: \"date_start\",\n        Cell: ({ cell: { value } }) => format(new Date(value), \"dd/MM/yyyy\"),\n      },\n      {\n        Header: \"Final Issue\",\n        accessor: \"subscribe_until\",\n        Filter: SelectColumnFilter,\n        filter: \"includes\",\n        Cell: ({ cell: { value } }) => parseInt(value) || \"N/A\",\n      },\n      {\n        Header: \"Starting Book\",\n        accessor: \"start_book\",\n        Filter: SelectColumnFilter,\n        filter: \"includes\",\n        Cell: ({ cell: { value } }) =>\n          value ? value.slice(0, value.indexOf(\"(\")) : null,\n      },\n      {\n        Header: \"Gift\",\n        accessor: \"gift\",\n        Cell: ({ cell: { value } }) => (value ? \"Gift\" : \"\"),\n      },\n      {\n        id: \"Expand\",\n        accessor: \"sub_id\",\n        Cell: ({ cell: { value } }) => (\n          <button onClick={seeMoreSub} data-sub_id={value}>\n            More\n          </button>\n        ),\n      },\n    ],\n    [seeMoreSub]\n  );\n\n  const patronColumns = React.useMemo(\n    () => [\n      {\n        Header: \"First Name\",\n        accessor: \"first_name\",\n      },\n      {\n        Header: \"Last Name\",\n        accessor: \"last_name\",\n      },\n      {\n        Header: \"Email\",\n        accessor: \"email\",\n      },\n      {\n        Header: \"Amount\",\n        accessor: \"amount\",\n        Cell: ({ cell: { value } }) => `€${value}`,\n      },\n      {\n        Header: \"Subscribed\",\n        accessor: \"date_start\",\n        Cell: ({ cell: { value } }) => format(new Date(value), \"dd/MM/yyyy\"),\n      },\n      {\n        id: \"Expand\",\n        accessor: \"patron_id\",\n        Cell: ({ cell: { value } }) => (\n          <button onClick={seeMorePatron} data-patron_id={value}>\n            More\n          </button>\n        ),\n      },\n    ],\n    [seeMorePatron]\n  );\n\n  // Filter the subs\n  let subs = props.data.subscribers;\n  let patrons = props.data.patrons;\n  let today = new Date();\n  let month_from_now = add(today, { months: 1 });\n\n  // List subs that are expiring in the next month.\n  let is_expiring = (arr) => {\n    if (arr[0].sub_id) {\n      return arr.filter(\n        (sub) =>\n          isBefore(parseISO(sub.next_renewal_date), month_from_now) &&\n          isAfter(parseISO(sub.next_renewal_date), today)\n      );\n    }\n    if (arr[0].patron_id) {\n      let expires = (p) => add(parseISO(p.date_start), { years: 1 });\n      return arr.filter(\n        (patron) =>\n          isBefore(expires(patron), month_from_now) &&\n          isAfter(expires(patron), today)\n      );\n    }\n  };\n\n  // List active subs\n  let is_active = (arr) => arr.filter((sub) => sub.sub_status === \"active\");\n\n  function CoolTab(props) {\n    const { isSelected, children } = props;\n    return (\n      <Tab\n        {...props}\n        style={{ textDecoration: isSelected ? \"underline\" : \"none\" }}\n      >\n        {children}\n      </Tab>\n    );\n  }\n\n  return (\n    <div id=\"admin_panel\">\n      <Dialog\n        aria-label=\"sub-dialog\"\n        isOpen={showSubDialog}\n        onDismiss={closeSubModal}\n      >\n        <button className=\"close-button\" onClick={closeSubModal}>\n          <VisuallyHidden>Close</VisuallyHidden>\n          <span aria-hidden>×</span>\n        </button>\n        <SubModal sub={subscriber} />\n      </Dialog>\n\n      <Dialog\n        aria-label=\"patron-dialog\"\n        isOpen={showPatronDialog}\n        onDismiss={closePatronModal}\n      >\n        <button className=\"close-button\" onClick={closePatronModal}>\n          <VisuallyHidden>Close</VisuallyHidden>\n          <span aria-hidden>×</span>\n        </button>\n        <PatronModal sub={patron} />\n      </Dialog>\n\n      <AdminHeader\n        activeSubs={is_active(subs)}\n        expiringSubs={is_expiring(subs)}\n        activePatrons={is_active(patrons)}\n        expiringPatrons={is_expiring(patrons)}\n      ></AdminHeader>\n      <Tabs>\n        <TabList>\n          <CoolTab>List Subscribers</CoolTab>\n          <CoolTab>Add New Subscriber</CoolTab>\n          <CoolTab>List Patrons</CoolTab>\n          <CoolTab>Add New Patron</CoolTab>\n        </TabList>\n        <TabPanels>\n          <TabPanel>\n            <SubscriberTable columns={subColumns} data={is_active(subs)} />\n          </TabPanel>\n          <TabPanel>\n            <AddSubForm />\n          </TabPanel>\n          <TabPanel>\n            <SubscriberTable\n              columns={patronColumns}\n              data={is_active(patrons)}\n            />\n          </TabPanel>\n        </TabPanels>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default AdminPanel;\n","// src/App.js\n\nimport React from \"react\";\nimport NavBar from \"./components/NavBar\";\nimport AdminPanel from \"./components/AdminPanel\";\nimport useSWR from \"swr\";\nimport axios from \"axios\";\nimport return_url from \"./utils/returnURL\";\nimport \"./App.css\";\n\nconst fetcher = async (url) => {\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nfunction App() {\n  const { data: subscribers, sub_error } = useSWR(return_url(), fetcher, {\n    refreshInterval: 120000,\n  });\n  const { data: patrons, patron_error } = useSWR(\n    return_url(\"patrons\"),\n    fetcher,\n    {\n      refreshInterval: 120000,\n    }\n  );\n\n  if (sub_error || patron_error) return <div>failed to load</div>;\n  if (!subscribers) return <div>loading...</div>;\n\n  let data = { subscribers: subscribers, patrons: patrons };\n\n  return (\n    <div className=\"App\">\n      <header>\n        <NavBar />\n      </header>\n      <AdminPanel data={data} />\n    </div>\n  );\n}\n\nexport default App;\n","// src/index.js\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}