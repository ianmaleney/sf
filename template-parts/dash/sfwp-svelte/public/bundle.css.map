{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/Subs.svelte",
    "../src/SubsHeader.svelte",
    "../src/SingleSub.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport SingleSub from \"./SingleSub.svelte\";\n\texport let subsData;\n</script>\n\n<style>\n\tul {\n\t\tlist-style: none;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n</style>\n\n<ul>\n\t{#each subsData as sub}\n\t\t<SingleSub {...sub} />\n\t{/each}\n</ul>",
    "<script>\n\texport let number;\n\timport { subscribers } from './stores.js';\n\tfunction handleSearch(e) {\n\t\tlet searchterm = e.target.value;\n\t\tsubscribers.filter(searchterm);\n\t}\n\tfunction handleSort(e) {\n\t\tlet t = e.target.dataset.key.toLowerCase();\n\t\tsubscribers.generalSort(t);\n\t}\n</script>\n<style>\n\nheader {\n\tmargin-bottom: 15px;\n\tmargin-left: 8px;\n}\n\n.filter-bar {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n}\n\n.filter {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-right: 20px;\n}\n\n.filter label {\n\tfont-size: 13px;\n\tfont-weight: bold;\n\tmargin-right: 8px;\n}\n\n#sub-search-input {\n\tborder: none;\n\tfont-size: 13px;\n\tline-height: 13px;\n}\n\n.sort span {\n\tfont-size: 13px;\n}\n.sub-sort-button {\n\tbackground-color: rgba(255,255,255,0);\n\tborder: none;\n\tcolor: rgb(0,100,200);\n\tborder-right: 1px solid #9E9E9F;\n\tpadding: 0 8px 0 7px;\n\tborder-radius: 0;\n\tbox-sizing: border-box;\n\tmargin: 8px 0;\n\tfont-size: 13px;\n}\n\n.sub-sort-button:hover {\n\tcolor: rgba(0,100,200,0.8);\n\ttext-decoration: underline;\n\tcursor: pointer;\n}\n.sub-sort-button:last-child {\n\tborder-right: none\n}\n\n</style>\n\n<header>\n<h1>{number} Subscribers</h1>\n\n<div class=\"filter-bar\">\n\t<div class=\"filter\">\n\t\t<label for=\"sub-search-input\">Search Subscribers:</label>\n\t\t<input id=\"sub-search-input\" type=\"text\" on:input={handleSearch}/>\n\t</div>\n\t<div class=\"sort\">\n\t\t<span><strong>Order By:</strong></span>\n\t\t<button class=\"sub-sort-button\" data-key=\"first_name\" on:click={handleSort}>Name</button>\n\t\t<button class=\"sub-sort-button\" data-key=\"email\" on:click={handleSort}>Email</button>\n\t\t<button class=\"sub-sort-button\" data-key=\"date_start\" on:click={handleSort}>Date Subscribed</button>\n\t\t<button class=\"sub-sort-button\" data-key=\"start_issue\" on:click={handleSort}>Starting Issue</button>\n\t\t<button class=\"sub-sort-button\" data-key=\"sub_status\" on:click={handleSort}>Status</button>\n\t\t<button class=\"sub-sort-button\" data-key=\"gift\" on:click={handleSort}>Gift</button>\n\t</div>\n</div>\n</header>",
    "<script>\nexport let sub_id, first_name, last_name, email, address_one, address_two, city, country, postcode, stripe_customer_id, wp_user_id, sub_status, subscribe_until, date_start, next_renewal_date, renewals, gift, start_issue, delivery_region, gifter_first_name, gifter_last_name, gifter_email\n\nlet init_address = [];\nlet loc;\n\nwindow.location.hostname === 'stingingfly.org' ? loc = 'https://stingingfly.org/stripe/api' : loc = 'https://sfwp.test/stripe/api'\n\nlet url = function(data, url = loc) {\n\tvar href = new URL(url);\n\tObject.keys(data).forEach(key => href.searchParams.append(key, data[key]));\n\treturn href.href;\n}\n\t\nfunction handleExpand(event) {\n\tlet n = event.target;\n\tlet parent = event.target.parentNode;\n\tif (parent.classList.contains(\"expanded\")) {\n\t\tparent.classList.remove(\"expanded\");\n\t\tn.textContent = \"+ More\";\n\t\tparent.style.width = \"185px\";\n\t\tparent.style.height = \"185px\";\n\t} else {\n\t\tparent.style.width = \"100%\";\n\t\tparent.style.height = \"auto\";\n\t\tparent.classList.add(\"expanded\");\n\t\tn.textContent = \"- Less\";\n\t}\n}\n\nasync function handleAddressSave(e) {\n\tlet sub = e.target.dataset.sub;\n\tlet subCard = document.querySelector(`#sub-${sub}`);\n\tlet inputs = subCard.querySelectorAll('.address-inputs input');\n\tlet formFields = ['address_one', 'address_two', 'city', 'country', 'postcode'];\n\tlet formdata = { sub_id: sub };\n\tif (e.target.dataset.stripe != 'null') {\n\t\tformdata['stripe_customer_id'] = e.target.dataset.stripe;\n\t}\n\tsubCard.querySelector(\"#address-edit\").style.display = 'inline';\n\tsubCard.querySelector(\"#address-cancel\").style.display = 'none';\n\tsubCard.querySelector(\"#address-save\").style.display = 'none';\n\tinputs.forEach((input, i) => {\n\t\tformdata[formFields[i]] = input.value;\n\t\tlet parent = input.parentNode;\n\t\tlet ptag = document.createElement('p');\n\t\tptag.style.fontSize = \"12px\";\n\t\tptag.style.lineHeight = \"18px\";\n\t\tptag.style.margin = 0;\n\t\tptag.textContent = input.value;\n\t\tinput.remove();\n\t\tparent.appendChild(ptag);\n\t});\n\tlet response = await fetch(url(formdata), {\n\t\tmethod: 'PUT'\n\t});\n\tlet data = await response.json()\n  \tconsole.log({data});\n}\nfunction handleAddressCancel(e) {\n\tlet sub = e.target.dataset.sub;\n\tlet subCard = document.querySelector(`#sub-${sub}`);\n\tlet inputs = subCard.querySelectorAll('.address-inputs input');\n\tsubCard.querySelector(\"#address-edit\").style.display = 'inline';\n\tsubCard.querySelector(\"#address-cancel\").style.display = 'none';\n\tsubCard.querySelector(\"#address-save\").style.display = 'none';\n\tinputs.forEach((input, i) => {\n\t\tlet tc = input.value;\n\t\tlet parent = input.parentNode;\n\t\tlet ptag = document.createElement('p');\n\t\tptag.style.fontSize = \"12px\";\n\t\tptag.style.lineHeight = \"18px\";\n\t\tptag.style.margin = 0;\n\t\tptag.textContent = init_address[i];\n\t\tinput.remove();\n\t\tparent.appendChild(ptag);\n\t});\n}\nfunction handleAddressEdit(e) {\n\tlet sub = e.target.dataset.sub;\n\tlet subCard = document.querySelector(`#sub-${sub}`);\n\tlet inputs = subCard.querySelectorAll('.address-inputs p');\n\te.target.style.display = 'none';\n\tsubCard.querySelector(\"#address-cancel\").style.display = 'inline';\n\tsubCard.querySelector(\"#address-save\").style.display = 'inline';\n\tinputs.forEach(ptag => {\n\t\tlet tc = ptag.textContent;\n\t\tlet parent = ptag.parentNode;\n\t\tlet input = document.createElement('input');\n\t\tinput.value = tc;\n\t\tinput.style.fontSize = '12px';\n    \tinput.style.lineHeight = '14px';\n    \tinput.style.padding = '3px';\n    \tinput.style.display = 'block';\n\t\tinput.style.margin = '2px 0';\n\t\tinit_address.push(tc);\n\t\tptag.remove();\n\t\tparent.appendChild(input);\n\t});\n}\n\nasync function handleSubCancel(e) {\n\tlet formdata = {\n\t\tsub_id: e.target.dataset.subid,\n\t}\n\tif (e.target.dataset.stripeid != 'null') {\n\t\tformdata['stripe_customer_id'] = e.target.dataset.stripeid;\n\t}\n\tlet response = await fetch(url(formdata), {\n\t\tmethod: 'DELETE'\n\t});\n\tlet data = await response.json();\n\tif (data.status_code === 'success') {\n\t\te.target.setAttribute('disabled', true);\n\t\te.target.textContent = 'Subscription Cancelled';\n\t} else {\n\t\tlet p = e.target.parentNode.querySelector('p');\n\t\tp.textContent = data.message;\n\t}\n\tconsole.log(data);\n}\n</script>\n\n<style>\n\t.subscriber-card {\n\t\tbackground-color: white;\n\t\twidth: 185px;\n\t\theight: 185px;\n\t\tmin-height: 185px;\n\t\tmargin: 8px;\n\t\tpadding: 10px;\n\t\tposition: relative;\n\t\tbox-sizing: border-box;\n\t\toverflow: hidden;\n\t}\n\n\t.subscriber-card h1 {\n\t\tmargin: 0 0 8px;\n\t\tpadding: 0;\n\t\tfont-weight: bold;\n\t\tpadding-bottom: 8px;\n\t\tborder-bottom: 1px solid rgba(0,0,0,0.1);\n\t\tfont-size: 16px;\n\t\tline-height: 22px;\n\t}\n\n\t.subscriber-card__info {\n\t\tdisplay: flex;\n\t}\n\n\t.subscriber-card__info-section {\n\t\tborder-right: 1px solid rgba(0,0,0,0.1);\n\t\tmargin-right: 8px;\n\t\tpadding-right: 8px;\n\t\tmin-width: 185px;\n\t}\n\n\t.subscriber-card__info-section:last-child {\n\t\tborder-right: none;\n\t\tmax-width: 320px;\n\t\tline-height: 1.1;\n    \tcolor: #5f5151;\n\t}\n\n\t.subscriber-card__basic-info a {\n\t\tdisplay: block;\n\t\tmargin-bottom: 8px;\n\t\tmax-width: calc(100% - 20px);\n\t\tword-break: break-word;\n\t}\n\n\t.subscriber-card__info-section a {\n\t\tfont-size: 12px;\n\t}\n\n\t.subscriber-card p, .address-line {\n\t\tfont-size: 12px;\n\t\tline-height: 18px;\n\t\tmargin: 0;\n\t}\n\n\t.subscriber-card__more-button {\n\t\tbackground-color: white;\n\t\tborder: none;\n\t\tpadding: 0;\n\t\tcolor: rgb(0,100,200);\n\t\tfont-size: 12px;\n\t\tposition: absolute;\n\t\tbottom: 5px;\n\t\tright: 10px;\n\t}\n\n\t.subscriber-card__more-button:hover {\n\t\tcolor: blue;\n\t\tcursor: pointer;\n\t}\n\n\t.subscriber-card__address {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t}\n\n\t.address-buttons {\n\t\talign-self: flex-end;\n\t}\n\n\t.subscriber-card__address button {\n\t\tborder: none;\n\t\tbackground-color: rgba(255,255,255,0);\n\t\tfont-size: 11px;\n\t\tcolor: rgba(0,100,200,1);\n\t\t/* position: absolute;\n\t\tbottom: -10px;\n\t\tright: 10px */\n\t}\n\n\t.subscriber-card__address button:hover {\n\t\tcolor: rgba(0,100,200,0.8);\n\t\tcursor: pointer;\n\t}\n\t.subscriber-card__cancel button {\n\t\tborder: 1px solid currentColor;\n\t\tbackground-color: rgba(255,255,255,0);\n\t\tcolor: rgba(0, 100, 200, 1);\n\t\tmargin: 8px auto;\n\t}\n\t.subscriber-card__cancel button:hover {\n\t\tcursor: pointer;\n\t\tbackground-color: rgba(16,135,254,0.1);\n\t}\n\t.subscriber-card__cancel button:disabled {\n\t\tcursor: pointer;\n\t\tbackground-color: #e9e9e9;\n\t\tcolor: #444;\n\t\topacity: 0.5;\n\t}\n\n\t#address-save, #address-cancel {\n\t\tdisplay: none;\n\t}\n</style>\n\n<li class=\"subscriber-card\" id=\"sub-{sub_id}\">\n\t<section>\n\t\t<h1>{first_name} {last_name}</h1>\n\t</section>\n\t<section class=\"subscriber-card__info\">\n\t\t<div class=\"subscriber-card__info-section subscriber-card__basic-info\">\n\t\t\t<a href=\"mailto:{email}\">{email}</a>\n\t\t\t<p><strong>Subscribed:</strong> {date_start}</p>\n\t\t\t<p><strong>Status:</strong> {sub_status}</p>\n\t\t</div>\n\t\t<div class=\"subscriber-card__info-section subscriber-card__address\">\n\t\t\t<div class=\"address-inputs\">\n\t\t\t\t<p class=\"address-line\">{address_one} </p>\n\t\t\t\t<p class=\"address-line\">{address_two} </p>\n\t\t\t\t<p class=\"address-line\">{city} </p>\n\t\t\t\t<p class=\"address-line\">{country} </p>\n\t\t\t\t<p class=\"address-line\">{postcode} </p>\n\t\t\t</div>\n\t\t\t<div class=\"address-buttons\">\n\t\t\t\t<button data-sub=\"{sub_id}\" data-stripe=\"{stripe_customer_id}\" id=\"address-save\" on:click={handleAddressSave}>Save</button>\n\t\t\t\t<button data-sub=\"{sub_id}\" data-stripe=\"{stripe_customer_id}\" id=\"address-cancel\" on:click={handleAddressCancel}>Cancel</button>\n\t\t\t\t<button data-sub=\"{sub_id}\" data-stripe=\"{stripe_customer_id}\" id=\"address-edit\" on:click={handleAddressEdit}>Edit Address</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"subscriber-card__info-section subscriber-card__secondary-info\">\n\t\t\t<p><strong>Starting Issue:</strong> {start_issue} </p>\n\t\t\t<p><strong>Access Ends:</strong> {next_renewal_date} </p>\n\t\t\t<p><strong>Renewals:</strong> {renewals} </p>\n\t\t\t<p><strong>Username:</strong> <a href=\"https://stingingfly.org/wp-admin/user-edit.php?user_id={wp_user_id}\">{first_name}{last_name}{sub_id}</a></p>\n\t\t</div>\n\t\t<div class=\"subscriber-card__info-section subscriber-card__cancel\">\n\t\t\t<button disabled=\"{sub_status == 'pending_cancellation'}\" data-subid={sub_id} data-stripeid={stripe_customer_id} on:click={handleSubCancel}>Cancel Subscription</button>\n\t\t\t<p>The subscriber will retain access to the online archive until their subscription expires. This is the same as removing ‘auto-renewal’.</p>\n\t\t</div>\n\t</section>\n\t<button class=\"subscriber-card__more-button\" on:click={handleExpand}>+ More</button>\n</li>"
  ],
  "names": [],
  "mappings": "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"
}